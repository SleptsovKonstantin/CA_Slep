(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{451:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i}));var n=[{id:"1high",value:"rgb(247, 0, 0, .68)"},{id:"2general",value:"rgba(255,208,34,0.8)"},{id:"3passive",value:"rgba(29,146,0,0.8)"}],r={"1high":"rgb(247, 0, 0, .3)","2general":"rgba(255,208,34,0.3)","3passive":"rgba(29,146,0,0.3)"},i={type:"",position:"",workGroup:"",plan:0,real_plan:0,openedAt:"",closedAt:"",comment:"",passiveSearchBy:"",activeSearchBy:"",link:""}},454:function(e,t,a){"use strict";a.d(t,"e",(function(){return getStaff})),a.d(t,"d",(function(){return getPossibleStaffForApplication})),a.d(t,"c",(function(){return getEmployeeSalary})),a.d(t,"a",(function(){return createEmployee})),a.d(t,"f",(function(){return updateEmployee})),a.d(t,"b",(function(){return deleteEmployee}));var n=a(18),getStaff=function(e){return new Promise((function(t){n.a.get("/staff",e).then((function(e){t(e)})).catch(console.warn)}))},getPossibleStaffForApplication=function(e){return new Promise((function(t){n.a.get("/staff/applications/possible",e).then((function(e){t(e)})).catch(console.warn)}))},getEmployeeSalary=function(e){return new Promise((function(t){n.a.get("/staff/employee/salary",e).then((function(e){t(e)})).catch(console.warn)}))},createEmployee=function(e){return new Promise((function(t,a){n.a.post("/staff",e).then((function(e){t(e)})).catch(a)}))},updateEmployee=function(e){return new Promise((function(t,a){n.a.put("/staff",e).then((function(e){t(e)})).catch(a)}))},deleteEmployee=function(e){return new Promise((function(t,a){n.a.delete("/staff",e).then((function(e){t(e)})).catch(a)}))}},458:function(e,t,a){"use strict";var n=a(27);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(45)).default)(r.default.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM5.92 19H5v-.92l9.06-9.06.92.92L5.92 19zM20.71 5.63l-2.34-2.34c-.2-.2-.45-.29-.71-.29s-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41z"}),"CreateOutlined");t.default=i},465:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(1),o=a.n(i),c=a(88),l=a(451),s=a(157),ClosedApplicationItem=function(e){var t,a=e.item,n=e.workGroupsIndexes;return r.a.createElement("div",{className:"ClosedApplicationItem"},r.a.createElement("span",{style:{padding:"5px",backgroundColor:l.b[a.type]}},"".concat(c.b[a.position]," "),n&&(null===(t=n[a.workGroup])||void 0===t?void 0:t.name)||"N/A"),r.a.createElement("span",{className:"ClosedApplicationItem-date"},Object(s.b)(a.closedAtReal)))};ClosedApplicationItem.propTypes={item:o.a.object,workGroupsIndexes:o.a.object},t.a=ClosedApplicationItem},483:function(e,t,a){"use strict";var n=a(3),r=a(15),i=a(0),o=i.useLayoutEffect,use_latest_esm=function(e){var t=Object(i.useRef)(e);return o((function(){t.current=e})),t},updateRef=function(e,t){"function"!==typeof e?e.current=t:e(t)},use_composed_ref_esm=function(e,t){var a=Object(i.useRef)();return Object(i.useCallback)((function(n){e.current=n,a.current&&updateRef(a.current,null),a.current=t,t&&updateRef(t,n)}),[t])},c={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},forceHiddenStyles=function(e){Object.keys(c).forEach((function(t){e.style.setProperty(t,c[t],"important")}))},l=null;var noop=function(){},s=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],u=!!document.documentElement.currentStyle,react_textarea_autosize_browser_esm_TextareaAutosize=function(e,t){var a=e.cacheMeasurements,o=e.maxRows,c=e.minRows,d=e.onChange,m=void 0===d?noop:d,p=e.onHeightChange,f=void 0===p?noop:p,b=Object(r.a)(e,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]);var v=void 0!==b.value,y=Object(i.useRef)(null),h=use_composed_ref_esm(y,t),g=Object(i.useRef)(0),w=Object(i.useRef)(),resizeTextarea=function(){var e=y.current,t=a&&w.current?w.current:function(e){var t=window.getComputedStyle(e);if(null===t)return null;var a,n=(a=t,s.reduce((function(e,t){return e[t]=a[t],e}),{})),r=n.boxSizing;return""===r?null:(u&&"border-box"===r&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px"),{sizingStyle:n,paddingSize:parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),borderSize:parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth)})}(e);if(t){w.current=t;var n=function(e,t,a,n){void 0===a&&(a=1),void 0===n&&(n=1/0),l||((l=document.createElement("textarea")).setAttribute("tabindex","-1"),l.setAttribute("aria-hidden","true"),forceHiddenStyles(l)),null===l.parentNode&&document.body.appendChild(l);var r=e.paddingSize,i=e.borderSize,o=e.sizingStyle,c=o.boxSizing;Object.keys(o).forEach((function(e){var t=e;l.style[t]=o[t]})),forceHiddenStyles(l),l.value=t;var s=function(e,t){var a=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?a+t.borderSize:a-t.paddingSize}(l,e);l.value="x";var u=l.scrollHeight-r,d=u*a;"border-box"===c&&(d=d+r+i),s=Math.max(d,s);var m=u*n;return"border-box"===c&&(m=m+r+i),[s=Math.min(m,s),u]}(t,e.value||e.placeholder||"x",c,o),r=n[0],i=n[1];g.current!==r&&(g.current=r,e.style.setProperty("height",r+"px","important"),f(r,{rowHeight:i}))}};return Object(i.useLayoutEffect)(resizeTextarea),function(e){var t=use_latest_esm(e);Object(i.useLayoutEffect)((function(){var handler=function(e){t.current(e)};return window.addEventListener("resize",handler),function(){window.removeEventListener("resize",handler)}}),[])}(resizeTextarea),Object(i.createElement)("textarea",Object(n.a)({},b,{onChange:function(e){v||resizeTextarea(),m(e)},ref:h}))},d=Object(i.forwardRef)(react_textarea_autosize_browser_esm_TextareaAutosize);t.a=d},497:function(e,t,a){},501:function(e,t,a){},502:function(e,t,a){},503:function(e,t,a){},504:function(e,t,a){},548:function(e,t,a){"use strict";a.r(t);var n=a(17),r=a.n(n),i=a(7),o=a.n(i),c=a(89),l=a.n(c),s=a(30),u=a.n(s),d=a(38),m=a.n(d),p=a(0),f=a.n(p),b=a(1),v=a.n(b),y=a(43),h=(a(497),a(555)),g=a(534),w=a(496),E=a(552),j=a(543),k=a(243),O=a.n(k),S=a(12),D=a(470),x=a(469),N=a(453),I=a.n(N),_=a(454),P=a(88),C=a(58),T=a(159),R=(a(501),a(462)),K=(a(502),a(444)),G=a(458),L=a.n(G),B=a(459),M=a.n(B),z=a(480),W=a.n(z),A=a(464),V=a.n(A),F=a(157),Y=a(553),H=a(540),q=a(541),U=a(542),J=a(127),$=(a(503),a(504),a(483)),commentSortFn=function(e,t){return new Date(null===t||void 0===t?void 0:t.created).getTime()-new Date(null===e||void 0===e?void 0:e.created).getTime()},CommentsInline_CommentsInline_CommentsInline=function(e){var t,a=e.comments,n=e.onSave,r=Object(p.useState)(a&&a.sort(commentSortFn)),i=u()(r,2),c=i[0],l=i[1],s=Object(p.useState)(""),d=u()(s,2),m=d[0],b=d[1];Object(p.useEffect)((function(){l(a&&a.sort(commentSortFn))}),[a]);return f.a.createElement("div",{className:"Comments CommentsInline"},f.a.createElement("div",{className:"CommentsInline-header"},f.a.createElement("div",{className:"CommentsInline-last"},"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438")),f.a.createElement("div",{className:"test"},f.a.createElement($.a,(t={id:"outlined-basic",label:"Outlined",variant:"outlined",rowsMin:3,className:""},o()(t,"label",""),o()(t,"placeholder","\u041e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),o()(t,"value",m),o()(t,"shrink",!0),o()(t,"multiline",!0),o()(t,"rows",2),o()(t,"rowsMax",4),o()(t,"onChange",(function(e){var t=e.target.value;b(t)})),t)),f.a.createElement(I.a,{className:"CommentsInline-add",onClick:function(){n(m),b("")}})),f.a.createElement("div",{className:"CommentsInline-list"},c.map((function(e){return f.a.createElement("div",{className:"CommentsInline-row",key:e._id},f.a.createElement("div",{className:"CommentsInline-text"},e.message),f.a.createElement("div",{className:"CommentsInline-date"},V()(e.created).format("DD.MM.YY hh:mm")||"--"))}))))};CommentsInline_CommentsInline_CommentsInline.propTypes={comments:v.a.array,onSave:v.a.func};var Q=CommentsInline_CommentsInline_CommentsInline,X=a(451),Z=a(465);function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ee={birthDate:Date,educationDate:Date,internDate:Date,startWorkDate:Date,hasProject:!1,inPlan:!1,result:"",leftReason:"",application:"",fio:"",channel:"",age:0,gender:"",english:0,tech:0,labor:0,loyal:0,phone:"",email:"",vk:"",hh:"",comment:""},EmployeeInfo_EmployeeInfo_EmployeeInfo=function(e){var t=e.item,a=e.onCancel,n=e.isOpen,i=e.teams,o=e.onSave,c=e.workGroups,s=e.applications,d=e.workGroupsIndexes,m=Object(p.useState)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=_objectSpread({},e);return a?(a.birthDate&&(a.birthDate=Object(F.b)(a.birthDate)),a.internDate&&(a.internDate=Object(F.b)(a.internDate)),a.trainingDate&&(a.trainingDate=Object(F.b)(a.trainingDate)),a.startWorkDate&&(a.startWorkDate=Object(F.b)(a.startWorkDate)),a.leftDate&&(a.leftDate=Object(F.b)(a.leftDate)),!a.leftDate&&t.leftDate&&(a.leftDate=null),a.comment=Array.isArray(a.comment)?a.comment:[],a):ee}(t)),b=u()(m,2),v=b[0],y=b[1],g=Object(p.useState)(!1),E=u()(g,2),j=E[0],k=E[1],O=function(){var e=l()(r.a.mark((function _callee(){var e,t,a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(k(!0),n.prev=1,!v._id){n.next=10;break}return e=v,n.next=6,Object(_.f)(e);case 6:return t=n.sent,k(!1),o(t),n.abrupt("return");case 10:return n.next=12,Object(_.a)(v);case 12:a=n.sent,o(a),k(!1),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(1),C.a.error(n.t0);case 20:case"end":return n.stop()}}),_callee,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}(),handleChangeSelect=function(e,t){if(t&&t.props){var a=t.props,n=a.dkey,r=a.value,i=_objectSpread({},v),o=n.split(".");o.length>1?i[o[0]][o[1]]=r:i[n]=r,"status"!==n||v.leftDate||-1===[40,50].indexOf(r)?y(i):C.a.info("\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0434\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u0442\u0443 \u0443\u0432\u043e\u043b\u044c\u043d\u0435\u043d\u0438\u044f")}},handleChangeInput=function(e){var t=e.target,a=t.value,n=t.checked,r=t.getAttribute("dkey"),i="Checkbox"===t.getAttribute("type"),o=_objectSpread({},v),c=r.split(".");c.length>1?o[c[0]][c[1]]=i?n:a:o[r]=i?n:a,"leftDate"===r&&-1===[40,50].indexOf(o.status)&&(o.status=40),y(o)},S=Boolean(v.application),D=s.filter((function(e){return!(e.workGroup!==v.workGroup||!Boolean(e.position))&&(v.application===e._id&&(S=!1),!0)})),x=v.applicationItem&&v.applicationItem.closedAtReal&&v.applicationItem._id===v.application;return f.a.createElement(Y.a,{onClose:a,"aria-labelledby":"customized-dialog-title",className:"EmployeeInfo",open:n},f.a.createElement(H.a,{id:"customized-dialog-title",onClose:a},(null===t||void 0===t?void 0:t.fio)||"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"),f.a.createElement(q.a,{dividers:!0,className:"Modal AddTeam"},f.a.createElement("div",{className:"EmployeeInfo-base"},"\u0424\u0418\u041e",f.a.createElement(h.a,{id:"outlined-basic",variant:"outlined",type:"Text",label:"",value:v.fio,InputLabelProps:{shrink:!0},inputProps:{dkey:"fio"},onChange:handleChangeInput}),"\u041a\u043e\u043c\u0430\u043d\u0434\u0430",f.a.createElement(J.a,{label:"\u041a\u043e\u043c\u0430\u043d\u0434\u0430",items:i||[],itemIdKey:"_id",dkey:"team",itemNameKey:"name",onChange:handleChangeSelect,selectedValue:v.team||"",className:""}),"\u0413\u043e\u0440\u043e\u0434",f.a.createElement(J.a,{label:"\u0413\u043e\u0440\u043e\u0434",items:P.f||[],itemIdKey:"id",dkey:"city",itemNameKey:"value",inputProps:{dkey:"city"},onChange:handleChangeSelect,selectedValue:v.city||"",className:""}),f.a.createElement("span",{title:P.o[v.old_position]},"\u041f\u043e\u0437\u0438\u0446\u0438\u044f*"),f.a.createElement(J.a,{label:"\u041f\u043e\u0437\u0438\u0446\u0438\u044f",items:P.p,itemIdKey:"id",itemNameKey:"value",onChange:handleChangeSelect,selectedValue:v.position||"",dkey:"position",className:""}),f.a.createElement("div",{className:"EmployeeInfo-application-wrapper"},x&&f.a.createElement(Z.a,{item:v.applicationItem,workGroupsIndexes:d}),f.a.createElement("span",null,"\u0417\u0430\u044f\u0432\u043a\u0430"),f.a.createElement(J.a,{items:D||[],itemIdKey:"_id",renderValue:function(e,t){var a;return f.a.createElement("span",{style:{padding:"0 3px",height:"20px",backgroundColor:X.b[t.type]}},P.b[t.position]," ",null===(a=d[t.workGroup])||void 0===a?void 0:a.name)},itemNameKey:"type",dkey:"application",onChange:handleChangeSelect,selectedValue:v.application||"",className:S?"bgError":""})),"\u0421\u0442\u0430\u0442\u0443\u0441",f.a.createElement(J.a,{label:"\u0421\u0442\u0430\u0442\u0443\u0441",items:P.g,itemIdKey:"id",dkey:"status",itemNameKey:"value",onChange:handleChangeSelect,selectedValue:v.status||"",className:""}),"\u0423\u0447\u0430\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 \u043f\u043b\u0430\u043d\u0435",f.a.createElement(J.a,{label:"\u0412 \u043f\u043b\u0430\u043d\u0435",items:[{id:!0,value:"\u0414\u0430"},{id:!1,value:"\u041d\u0435\u0442"}],itemIdKey:"id",dkey:"inPlan",itemNameKey:"value",onChange:handleChangeSelect,selectedValue:-1!==[!0,!1].indexOf(v.inPlan)?v.inPlan:"",className:""}),f.a.createElement("a",{className:"disable"},"\u0421\u0442\u0430\u0436"),f.a.createElement(h.a,{id:"outlined-basic",variant:"outlined",type:"Text",label:"",value:Object(F.d)(v),InputLabelProps:{shrink:!0},disabled:!0}),f.a.createElement("a",{className:"disable"},"\u0412\u043e\u0437\u0440\u0430\u0441\u0442"),f.a.createElement(h.a,{id:"outlined-basic",variant:"outlined",type:"Text",label:"",value:Object(F.c)(v),InputLabelProps:{shrink:!0},disabled:"disabled"}),"\u0412\u041a",f.a.createElement(h.a,{id:"outlined-basic",variant:"outlined",type:"Text",label:"",InputLabelProps:{shrink:!0},value:v.vk,inputProps:{dkey:"vk"},onChange:handleChangeInput}),"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",f.a.createElement(h.a,{id:"outlined-basic",variant:"outlined",type:"date",label:"",InputLabelProps:{shrink:!0},value:v.birthDate,inputProps:{dkey:"birthDate"},onChange:handleChangeInput}),"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",f.a.createElement(h.a,{id:"outlined-basic",variant:"outlined",type:"Text",label:"",InputLabelProps:{shrink:!0},value:v.phone,inputProps:{dkey:"phone"},onChange:handleChangeInput}),"Email",f.a.createElement(h.a,{id:"outlined-basic",variant:"outlined",type:"Text",label:"",InputLabelProps:{shrink:!0},value:v.email,inputProps:{dkey:"email"},onChange:handleChangeInput}),"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f",f.a.createElement(h.a,{id:"outlined-basic",variant:"outlined",type:"date",label:"",value:v.trainingDate,inputProps:{dkey:"trainingDate"},onChange:handleChangeInput,InputLabelProps:{shrink:!0}}),"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u0442\u0430\u0436\u0438\u0440\u043e\u0432\u043a\u0438",f.a.createElement(h.a,{id:"outlined-basic",variant:"outlined",type:"date",label:"",InputLabelProps:{shrink:!0},value:v.internDate,inputProps:{dkey:"internDate"},onChange:handleChangeInput}),"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430 \u0440\u0430\u0431\u043e\u0442\u044b",f.a.createElement(h.a,{id:"outlined-basic",variant:"outlined",type:"date",label:"",InputLabelProps:{shrink:!0},value:v.startWorkDate,inputProps:{dkey:"startWorkDate"},onChange:handleChangeInput}),"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0440\u0430\u0431\u043e\u0442\u044b",f.a.createElement(h.a,{id:"outlined-basic",variant:"outlined",type:"date",label:"",InputLabelProps:{shrink:!0},value:v.leftDate,inputProps:{dkey:"leftDate"},onChange:handleChangeInput}),"\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0443\u0445\u043e\u0434\u0430",f.a.createElement(J.a,{label:"\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0443\u0445\u043e\u0434\u0430",items:P.k,itemIdKey:"id",itemNameKey:"value",dkey:"leftReason",onChange:handleChangeSelect,selectedValue:v.leftReason||"",className:""}),"\u0420\u0430\u0431\u043e\u0447\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u0430",f.a.createElement(J.a,{displayEmpty:!0,label:"\u0420\u0430\u0431\u043e\u0447\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u0430",items:c,itemIdKey:"_id",itemNameKey:"name",dkey:"workGroup",onChange:handleChangeSelect,selectedValue:v.workGroup||"",className:""}),f.a.createElement(Q,{comments:v.comment,onSave:function(e){var t=_objectSpread({},v);t.comment.unshift({created:new Date,message:e,from:""}),y(t)}}),"\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d \u043d\u0430 \u041e\u041e\u041e (ExceedTeam)",f.a.createElement(J.a,{label:"\u041d\u0430 \u041e\u041e\u041e",items:[{id:!0,value:"\u0414\u0430"},{id:!1,value:"\u041d\u0435\u0442"}],itemIdKey:"id",dkey:"inLLC_RU",itemNameKey:"value",onChange:handleChangeSelect,selectedValue:-1!==[!0,!1].indexOf(v.inLLC_RU)?v.inLLC_RU:"",className:""}),f.a.createElement(w.a,{onClick:a,color:"primary",disabled:j&&!1,className:"Close"},"\u0412\u0441\u0435 \u0445\u043e\u0440\u043e\u0448\u043e"))),f.a.createElement(U.a,null,f.a.createElement(w.a,{onClick:a,color:"primary",disabled:j&&!1,className:"Close"},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043e\u043a\u043d\u043e"),f.a.createElement(w.a,{onClick:O,color:"primary",disabled:j&&!1},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))};EmployeeInfo_EmployeeInfo_EmployeeInfo.propTypes={workGroupsIndexes:v.a.object,item:v.a.object,teams:v.a.array,workGroups:v.a.array,applications:v.a.array,isOpen:v.a.bool,onCancel:v.a.func.isRequired,onSave:v.a.func.isRequired};var te=Object(y.b)((function(e){return{user:e.auth.user,teams:e.app.teams,workGroups:e.app.workGroups,workGroupsIndexes:e.app.workGroupsIndexes}}))(EmployeeInfo_EmployeeInfo_EmployeeInfo);function StaffTableRow_ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ae={interviewDate:"",resultDate:"",result:"",leftReason:"",fio:"",channel:"",age:0,gender:"",status:"",english:0,tech:0,labor:0,loyal:0,phone:"",vk:"",hh:"",comment:""},StaffTableRow_prepareData=function(e){if(!e)return ae;var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?StaffTableRow_ownKeys(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):StaffTableRow_ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e);return t.interviewDate&&(t.interviewDate=Object(F.b)(t.interviewDate)),t},ne=new Date("2021-10-20").getTime(),re=[P.i["\u0423\u0432\u043e\u043b\u0438\u043b\u0441\u044f"],P.i["\u0423\u0432\u043e\u043b\u0435\u043d"]],StaffTableRow_StaffTableRowRow=function(e){var t=e.item,a=e.teamsIndexes,n=e.onRemove,r=e.showDismissed,i=e.applications,o=e.user,c=e.applicationsWGIndexes,l=Object(p.useState)(StaffTableRow_prepareData(t)),s=u()(l,2),d=s[0],m=s[1],b=Object(p.useState)(!1),v=u()(b,2),y=v[0],h=v[1],g=function(e,t){var a=ne<new Date(e.createdAt).getTime(),n=-1!==re.indexOf(e.result),r=new Date(e.leftDate).getTime(),i=new Date(e.startWorkDate).getTime(),o=e.trainingDate?new Date(e.trainingDate).getTime():new Date(e.internDate).getTime(),c=Object(F.c)(e);if(!e.startWorkDate&&!e.trainingDate&&!e.internDate)return"\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0434\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430 \u0440\u0430\u0431\u043e\u0442\u044b/\u0441\u0442\u0430\u0436\u0438\u0440\u043e\u0432\u043a\u0438/\u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f ";if(!e.application&&a)return"\u041d\u0435\u0442 \u0437\u0430\u044f\u0432\u043a\u0438";if(!e.position)return"\u041d\u0435\u0442 \u043f\u043e\u0437\u0438\u0443\u0446\u0438\u0438";if(n){var l,s,u=null===(l=e.updateLog)||void 0===l||null===(s=l.status)||void 0===s?void 0:s.find((function(e){return-1!==re.indexOf(e.toValue)}));if(u){var d=new Date(u.changedAt).getTime();if(!e.leftDate)return"\u041d\u0435\u0442 \u0434\u0430\u0442\u044b \u0443\u0432\u043e\u043b\u044c\u043d\u0435\u043d\u0438\u044f";if(Math.abs(r-d)>12096e5)return"\u041f\u043e\u0437\u0434\u043d\u043e \u0430\u043a\u0442\u0443\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d \u0441\u0442\u0430\u0442\u0443\u0441"}}return e.leftDate&&r<i?"\u0414\u0430\u0442\u0430 \u0443\u0432\u043e\u043b\u044c\u043d\u0435\u043d\u0438\u044f \u0440\u0430\u043d\u044c\u0448\u0435 \u0434\u0430\u0442\u044b \u043d\u0430\u0447\u0430\u043b\u0430 \u0440\u0430\u0431\u043e\u0442\u044b":e.birthDate?c<18||c>40?"\u0412\u043e\u0437\u0440\u0430\u0441\u0442":i-o>12096e6?"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043e\u043b\u0433\u0430\u044f \u0441\u0442\u0430\u0436\u0438\u0440\u043e\u0432\u043a\u0430/\u0443\u0447\u0435\u0431\u0430":i>(new Date).getTime()?"\u041d\u0430\u0447\u0430\u043b\u043e \u0440\u0430\u0431\u043e\u0442\u044b \u0432 \u0431\u0443\u0434\u0443\u0449\u0435\u043c":(a&&!e.applicationItem&&t[e.application]!==e.workGroup||!(!a||!e.applicationItem||e.applicationItem.workGroup===e.workGroup))&&"\u0417\u0430\u044f\u0432\u043a\u0430 \u043d\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0440\u0430\u0431\u043e\u0447\u0435\u0439 \u0433\u0440\u0443\u043f\u043f\u0435":"\u041d\u0435\u0442 \u0414\u0430\u0442\u044b \u0440\u043e\u0436\u0435\u043d\u0438\u044f"}(d,c);return f.a.createElement("div",{className:"StaffTableRow StaffTableRow-leftDate-".concat(d.leftReason||"","  ").concat(g?"bgError":"")},y&&f.a.createElement(te,{isOpen:y,onCancel:function(e){e.stopPropagation(),e.preventDefault(),h(!1)},item:d,applications:i,onSave:function(e){m(e),h(!1)}}),f.a.createElement("div",{className:"StaffTableRow-input xs5"},f.a.createElement(K.a,{variant:"body1",gutterBottom:!0},f.a.createElement(f.a.Fragment,null,d.fio,f.a.createElement(W.a,{className:"StaffTableRow-creator",title:d.mainRecruiterName||d.createdBy||"\u041d\u0435\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439"}),f.a.createElement("span",{className:"StaffTableRow-creator-info"},d.mainRecruiterName||d.createdBy||"\u041d\u0435\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439")))),f.a.createElement("div",{className:"StaffTableRow-input xs2"},f.a.createElement(K.a,{variant:"body1",gutterBottom:!0},function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.team&&(null===(t=a[e.team])||void 0===t?void 0:t.name)||"--"}(d,a))),f.a.createElement("div",{className:"StaffTableRow-input xs1_5"},f.a.createElement(K.a,{variant:"body1",gutterBottom:!0},P.q[d.position])),f.a.createElement("div",{className:"StaffTableRow-input xs1_5"},f.a.createElement(K.a,{variant:"body1",gutterBottom:!0},P.h[d.status]||"--")),f.a.createElement("div",{className:"StaffTableRow-input xs1_5"},f.a.createElement(K.a,{variant:"body1",gutterBottom:!0},Object(F.d)(d))),r&&f.a.createElement("div",{className:"StaffTableRow-input xs1_5"},f.a.createElement(K.a,{variant:"body1",gutterBottom:!0},V()(d.leftDate).format("DD.MM.YY")||"--")),f.a.createElement("div",{className:"StaffTableRow-input xs1_5"},f.a.createElement(K.a,{variant:"body1",gutterBottom:!0},d.trainingDate&&V()(d.trainingDate).format("DD.MM.YY")||"--")),f.a.createElement("div",{className:"StaffTableRow-input xs1_5"},f.a.createElement(K.a,{variant:"body1",gutterBottom:!0},d.internDate&&V()(d.internDate).format("DD.MM.YY")||"--")),f.a.createElement("div",{className:"StaffTableRow-input xs4"},f.a.createElement(K.a,{variant:"body1",gutterBottom:!0},function(e){return"string"===typeof e?e:Array.isArray(e)&&(null===(t=e[0])||void 0===t?void 0:t.message)||"";var t}(d.comment))),f.a.createElement("div",{className:"StaffTableRow-input xs6"},f.a.createElement(K.a,{variant:"body1",gutterBottom:!0},f.a.createElement(L.a,{onClick:function(){var e=!0;return d.mainRecruiterId&&d.mainRecruiterId!==o._id&&(e=!1),!d.mainRecruiterId&&d.createdById&&d.createdById!==o._id&&(e=!1),!(!e&&!window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u044c \u0432\u0435\u0434\u0443\u0449\u0438\u043c \u0440\u0435\u043a\u0440\u0443\u0442\u0435\u0440\u043e\u043c \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430"))&&(h(!0),!0)}}),f.a.createElement(M.a,{onClick:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0423\u0414\u0410\u041b\u0418\u0422\u042c \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430? \n ".concat(d.fio))&&n(d._id)}})),g&&f.a.createElement("div",{className:"StaffTableRow-anomaly"},"*",f.a.createElement("span",null,g))))};StaffTableRow_StaffTableRowRow.propTypes={item:v.a.object,applicationsWGIndexes:v.a.object,teamsIndexes:v.a.object,user:v.a.object,applications:v.a.array,onRemove:v.a.func,showDismissed:v.a.oneOf([v.a.bool,v.a.string])};var ie=Object(y.b)((function(e){return{user:e.auth.user}}))(StaffTableRow_StaffTableRowRow),StaffTable_StaffTable_StaffTable=function(e){var t=e.data,a=e.teams,n=e.teamsIndexes,r=e.onRemove,i=e.loading,o=e.showDismissed,c=e.applications,l=e.applicationsWGIndexes;return f.a.createElement("div",{className:"StaffTable"},f.a.createElement("div",{className:"StaffTable-header"},i&&f.a.createElement(R.a,null),f.a.createElement("div",{className:"StaffTable-col xs5"},"\u0424\u0418\u041e"),f.a.createElement("div",{className:"StaffTable-col xs2"},"\u041a\u043e\u043c\u0430\u043d\u0434\u0430"),f.a.createElement("div",{className:"StaffTable-col xs1_5"},"\u041f\u043e\u0437\u0438\u0446\u0438\u044f"),f.a.createElement("div",{className:"StaffTable-col xs1_5"},"\u0421\u0442\u0430\u0442\u0443\u0441"),f.a.createElement("div",{className:"StaffTable-col xs1_5"},"\u0421\u0442\u0430\u0436"),o&&f.a.createElement("div",{className:"StaffTable-col xs1_5"},"\u0423\u0432\u043e\u043b\u0435\u043d"),f.a.createElement("div",{className:"StaffTable-col xs1_5"},"\u041d\u0430\u0447. \u041e\u0431\u0443\u0447\u0435\u043d\u0438\u044f"),f.a.createElement("div",{className:"StaffTable-col xs1_5"},"\u041d\u0430\u0447. \u0421\u0442\u0430\u0436\u0438\u0440\u043e\u0432\u043a\u0438"),f.a.createElement("div",{className:"StaffTable-col xs3"},"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438")),f.a.createElement("div",{className:"StaffTable-content"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t?e:e.sort((function(e,t){try{return e.interviewDate&&!t.interviewDate?1:t.interviewDate&&!e.interviewDate?-1:t.interviewDate||e.interviewDate?t.interviewDate===e.interviewDate?0:new Date(t.interviewDate).getTime()>new Date(e.interviewDate).getTime()?1:-1:0}catch(a){return console.warn("err",a),0}}))}(Array.isArray(t)?t:[],o).map((function(e,t){return f.a.createElement(ie,{applications:c,item:e,key:e._id||t,teams:a,teamsIndexes:n,applicationsWGIndexes:l,onRemove:r,showDismissed:o})}))))};StaffTable_StaffTable_StaffTable.propTypes={teamsIndexes:v.a.object,applicationsWGIndexes:v.a.object,teams:v.a.array,data:v.a.array,applications:v.a.array,onRemove:v.a.func,loading:v.a.bool,showDismissed:v.a.bool};var oe=StaffTable_StaffTable_StaffTable;function staff_ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function staff_objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?staff_ownKeys(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):staff_ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ce=Object(F.a)(1800),le=Object(S.a)({root:{color:O.a[400],"&$checked":{color:O.a[400]}},checked:{}})((function(e){return f.a.createElement(E.a,m()({color:"default"},e))})),staff_StaffIgor=function(e){var t=e.teams,a=e.teamsIndexes,n=e.history,i=Object(p.useState)([]),c=u()(i,2),s=c[0],d=c[1],m=Object(p.useState)(""),b=u()(m,2),v=b[0],y=b[1],E=Object(p.useState)(null),k=u()(E,2),O=k[0],S=k[1],N=Object(p.useState)(!1),R=u()(N,2),K=R[0],G=R[1],L=Object(p.useState)(function(){var e={position:"",leftReason:"",team:"",status:"",city:"",onlyMy:!1,dismissed:!1};return"true"===localStorage.getItem("onlyMy")&&(e.onlyMy=!0),localStorage.getItem("team")&&(e.team=localStorage.getItem("team")),e}()),B=u()(L,2),M=B[0],z=B[1],W=Object(p.useState)([]),A=u()(W,2),V=A[0],F=A[1],Y=Object(p.useState)([]),H=u()(Y,2),q=H[0],U=H[1],$=Object(p.useState)(!0),Q=u()($,2),X=Q[0],Z=Q[1],ee=function(){var e=l()(r.a.mark((function _callee(){var e,t,a=arguments;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},Z(!0),n.next=4,Object(_.e)(staff_objectSpread(staff_objectSpread({},e),{},{team:void 0,workGroup:void 0,limit:500}));case 4:t=n.sent,d(t.items),S({count:t.count,limit:t.limit,page:t.skip/t.limit}),Z(!1);case 8:case"end":return n.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=l()(r.a.mark((function _callee2(){var e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(T.c)({});case 2:e=t.sent,F(e.items),U(e.items.reduce((function(e,t){return staff_objectSpread(staff_objectSpread({},e),{},o()({},t._id,t.workGroup))}),{}));case 5:case"end":return t.stop()}}),_callee2)})));return function(){return e.apply(this,arguments)}}();Object(p.useEffect)((function(){var e=staff_objectSpread({},M),t=n.location.query._id;t&&(e.employeeId=t),ee(e),ae(staff_objectSpread({},M))}),[]);var search=function(e){ee({search:e})},handleChangeSelect=function(e,t){if(t&&t.props){var a=t.props,n=a.dkey,r=a.value,i=staff_objectSpread({},M);i[n]=r||"","team"===n&&localStorage.setItem("team",r||""),z(i);var o=staff_objectSpread(staff_objectSpread({search:v},O),i);ee(o)}},handleChange=function(e){return function(t){var a=staff_objectSpread({},M);a[e]=t.target.checked,z(a),"onlyMy"===e&&localStorage.setItem("onlyMy",t.target.checked),ee(staff_objectSpread(staff_objectSpread({search:v},O),a))}},ne=function(){var e=l()(r.a.mark((function _callee3(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Z(!0),!e){t.next=14;break}return t.prev=2,t.next=5,Object(_.b)({id:e});case 5:ee(staff_objectSpread({},M)),C.a.success("\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d"),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(2),Z(!1),C.a.error("\u041d\u0435\u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c"),console.warn(t.t0);case 14:case"end":return t.stop()}}),_callee3,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return f.a.createElement("div",{className:"Staff"},f.a.createElement("div",{className:"Staff-filters"},K&&f.a.createElement(te,{isOpen:K,onCancel:function(){G(!1)},applications:V,item:null,onSave:function(e){G(!1);var t=[e].concat(s);d(t)}}),f.a.createElement("div",{className:"Staff-filters-selectors"},f.a.createElement("div",{className:"mr10"},f.a.createElement(w.a,{variant:"contained",color:"primary",size:"small",onClick:function(){G(!0)},className:"ExcelTable-addBtn",startIcon:f.a.createElement(I.a,null)},"\u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a")),f.a.createElement("div",{className:"Search"},f.a.createElement(x.a,{icon:D.b}),f.a.createElement(h.a,{id:"outlined-basic",variant:"outlined",label:"",className:"selector-lg",onKeyUp:function(e){13===e.keyCode&&search(v)},InputLabelProps:{shrink:!0},placeholder:"\u0424\u0418\u041e/\u0442\u0435\u043b\u0435\u0444\u043e\u043d/\u043f\u043e\u0447\u0442\u0430/vk",value:v,onChange:function(e){var t=e.target.value;y(t),ce("search",search,t)}})),f.a.createElement(J.a,{label:"\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0443\u0445\u043e\u0434\u0430",items:P.k,itemIdKey:"id",itemNameKey:"value",dkey:"leftReason",onChange:handleChangeSelect,selectedValue:M.leftReason,className:"selector-md"}),f.a.createElement(J.a,{label:"\u041f\u043e\u0437\u0438\u0446\u0438\u044f",items:P.p,itemIdKey:"id",itemNameKey:"value",dkey:"position",onChange:handleChangeSelect,selectedValue:M.position,className:"selector-md"}),f.a.createElement(J.a,{label:"\u0421\u0442\u0430\u0442\u0443\u0441",items:P.g,itemIdKey:"id",dkey:"status",itemNameKey:"value",onChange:handleChangeSelect,selectedValue:M.status||"",className:"selector-md"}),f.a.createElement("div",{className:"Staff-filters-checkboxes"},f.a.createElement(j.a,{control:f.a.createElement(le,{checked:M.onlyPlan,onChange:handleChange("onlyPlan"),name:"checkedB",color:"primary"}),label:"\u0422\u043e\u043b\u044c\u043a\u043e \u043b\u044e\u0434\u0438 \u0432 \u043f\u043b\u0430\u043d\u0435"}),f.a.createElement(j.a,{control:f.a.createElement(le,{checked:M.dismissed,onChange:handleChange("dismissed"),name:"checkedB",color:"primary"}),label:"\u0423\u0432\u043e\u043b\u0435\u043d\u043d\u044b\u0435"})))),f.a.createElement(oe,{data:s,teams:t,teamsIndexes:a,applicationsWGIndexes:q,onRemove:ne,loading:X,applications:V,showDismissed:M.dismissed}),O&&f.a.createElement(g.a,{rowsPerPageOptions:[5,10,15,20,25],component:"div",count:O.count,rowsPerPage:O.limit,page:O.page||0,onChangePage:function(e,t){var a=staff_objectSpread(staff_objectSpread({},O),{},{page:t});ee(staff_objectSpread(staff_objectSpread({search:v},a),M))},onChangeRowsPerPage:function(e,t){var a=staff_objectSpread(staff_objectSpread({},O),{},{limit:t.props.value,page:0});ee(staff_objectSpread(staff_objectSpread({search:v},a),M))}}))};staff_StaffIgor.propTypes={teamsIndexes:v.a.object,teams:v.a.array,workGroups:v.a.array,history:v.a.object};t.default=Object(y.b)((function(e){return{user:e.auth.user,teamsIndexes:e.app.teamsIndexes,teams:e.app.teams,workGroups:e.app.workGroups}}))(staff_StaffIgor)}}]);